<style>
    @media(min-width:768px) {
        .eventCard {
            padding: 20px;
        }
    }

    @media(min-width:992px) {
        .eventCard {
            padding: 20px;
        }
    }

    @media(min-width:1200px) {
        .eventCard {
            padding: 20px;
        }
    }

    #page-wrapper {
        padding: 0 0px;
    }
</style>

<div class="wrapper wrapper-content" id="manageRequestTriviaCtl" ng-controller="manageRequestTriviaCtl">
    <div class="m-t-sm" style="margin-top:2.5rem;">
        <div class="row">
            <div class="col-xs-12 col-sm-12 col-md-12 col-xl-12 col-lg-12">
                <div class="row card eventCard" style="margin: 0rem 0 0.5rem 0 !important;">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-xl-12 col-lg-12">
                        <link rel="stylesheet" type="text/css" href="assets/businessAC/css/autocomplete.css" />
                        <div class="autocomplete col-sm-12 col-xs-8 col-md-6 col-lg-6 col-xl-6"
                            style="padding-right:0px;padding-left:0px;">
                            <input id="autocompleteBusiness" type="text" name="BusinessName"
                                placeholder="Enter Business name">
                            <span id="businessErr" style="color:red;"></span>
                        </div>
                        <script type="text/javascript" src="assets/businessAC/js/autocomplete.js"></script>
                        <script
                            type="text/javascript">autocomplete(document.getElementById("autocompleteBusiness"), 'manageTriviaEvent');</script>
                        <div class="autocomplete col-sm-12 col-xs-4 col-md-6 col-lg-6 col-xl-6">
                            <button type="button" ng-click="BusinessSelected('manageTriviaEvent')" id="businessSubmit"
                                class="btn btn-raised btn-primary businessSubmit">
                                <i class="fa fa-check" aria-hidden="true"></i>&nbsp;&nbsp;Submit</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row card">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <div class="row">
                    <div class="col-xs-12 col-sm-12 col-md-12 col-xl-12 col-lg-12">
                        <div class="row">
                            <div class="col-sm-12 col-xs-12 col-md-12 col-lg-12 col-xl-12">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-xl-12 col-lg-12">
                                        <button class="btn btn-primary"
                                            style="border-radius: 5%;padding: 4px 9px !important;
                                        background-color:#f9a141 !important;color:#fff !important;font-size: 20px;margin-bottom:1rem;margin-top:1rem;"
                                            title="Filter" data-toggle="collapse" data-target="#filterCollapse"
                                            role="button" aria-expanded="false" aria-controls="filterCollapse">
                                            <i class="fas fa-filter"></i> Filter
                                        </button>
                                    </div>
                                    <div class="col-sm-12 col-xs-12 col-md-12 col-lg-12 col-xl-12">
                                        <div class="collapse" id="filterCollapse">
                                            <div class="row">
                                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                                                    <div class="form-group">
                                                        <label for="f-date"
                                                            style="font-size: 16px !important;">Date</label>
                                                        <input type="Date" class="form-control"
                                                            style="font-size: 16px !important;" id="f-date"
                                                            placeholder="Date">
                                                    </div>
                                                </div>
                                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4">
                                                    <div class="form-group">
                                                        <label for="f-date"
                                                            style="font-size: 16px !important;">Types</label>
                                                        <select name="category" class="form-control"
                                                            style="font-size: 16px !important;" id="f-type">
                                                            <option value="select">Select</option>
                                                            <option value="Non-ticketed">Non-ticketed</option>
                                                            <option value="Ticketed">Ticketed</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 col-xl-4"
                                                    style="text-align: center !important">
                                                    <button class="btn btn-primary" ng-click="filterRequestEvents()"
                                                        style="background-color: #f9a141 !important;border-radius: 2px;margin-top:2rem;font-size:18px !important;"><i
                                                            class="fa fa-search" aria-hidden="true"></i>
                                                        &nbsp; Search</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 col-xl-12 col-lg-12">
                                <table class="table table-bordered">
                                    <thead>
                                        <tr>
                                            <th colspan="2">
                                                <span>Request</span>
                                            </th>
                                            <th rowspan="2">
                                                <span>Event Title</span>
                                            </th>
                                            <th colspan="2">
                                                <span>Team</span>
                                            </th>
                                            <th rowspan="2">
                                                <span>Entry</span>
                                            </th>
                                            <th rowspan="2">
                                                <span>Type</span>
                                            </th>
                                        </tr>
                                        <tr>
                                            <th>
                                                <span>Date</span>
                                            </th>
                                            <th>
                                                <span>Time</span>
                                            </th>
                                            <th>
                                                <span>Size</span>
                                            </th>
                                            <th>
                                                <span>Name</span>
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr ng-repeat="list in requestDataForWhats" ng-click="changeStatus(list.id)"
                                            data-toggle="modal" data-target="#eventsViewModal">
                                            <td>
                                                <span>
                                                    {{list.requestDate | date : "EEE, dd MMM , y"}}
                                                </span>
                                            </td>
                                            <td>
                                                <span>
                                                    {{list.request.time}}
                                                </span>
                                            </td>
                                            <td>
                                                <span>{{list.eventTitle}}</span>
                                            </td>

                                            <td class="center">
                                                <span
                                                    style="box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);background-color:#3f51b5;color:#fff;border-radius:50px;padding:2px 6px;">{{list.partySize}}</span>
                                            </td>
                                            <td>
                                                <span>{{list.teamName}}</span>
                                            </td>
                                            <td class="center">
                                                <span
                                                    style="box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);background-color:green;color:#fff;border-radius:2px;padding:4px 10px;"
                                                    ng-show="list.happenings.entryType=='Paid'">{{list.happenings.entryType}}</span>
                                                <span
                                                    style="box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);background-color:#f50057;color:#fff;border-radius:2px;padding:4px 10px;"
                                                    ng-show="list.happenings.entryType=='Free'">{{list.happenings.entryType}}</span>
                                            </td>
                                            <td class="center">
                                                <span ng-if="list.isGroupPayment"
                                                    style="background-color: #f9a141 !important;color:#fff;padding: 3px 22px;box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);border-radius:2px;">Group</span>
                                                <span ng-if="!list.isGroupPayment"
                                                    style="background-color: darkblue;color:#fff;padding: 3px 10px;box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);border-radius:2px;">Individual</span>
                                            </td>
                                        </tr>
                                        <tr ng-show="requestDataForWhats && requestDataForWhats.length==0">
                                            <td colspan="8" style="font-size: 1.8rem !important;">
                                                <center><span>No Data!</span></center>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <div class="modal left fade" id="eventsViewModal" tabindex="-1" role="dialog"
                        aria-labelledby="myModalLabel" style="top: 0px!important;">
                        <div class="modal-dialog" role="document">
                            <div class="modal-content">
                                <div class="modal-header"
                                    style="background-color: #f57c00 !important;box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">
                                        <ul>
                                            <li style="margin-top:10px;color:#fff !important;"><span
                                                    style="font-size:20px;">Trivia</span></li>
                                        </ul>
                                    </h4>
                                </div>
                                <div class="modal-body" style="text-align:left !important;">
                                    <div class="row">
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th style="text-align:left !important;">
                                                            <span style="font-size: 1.2rem !important;">Event</span>
                                                        </th>
                                                        <th style="text-align:left !important;">
                                                            <span style="font-size: 1.2rem !important;">Team</span>
                                                        </th>
                                                        <th style="text-align:left !important;"><span>Inviter</span>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <div class="row">
                                                                <div
                                                                    class="col-sm-12 col-xl-12 col-xs-12 col-lg-12 col-md-12">
                                                                    <span style="font-size: 1.1rem !important;"> <b>Date
                                                                            :</b>
                                                                        {{triviaEvent.happenings.dateFormat}}</span>
                                                                </div>
                                                                <div
                                                                    class="col-sm-12 col-xl-12 col-xs-12 col-lg-12 col-md-12">
                                                                    <span style="font-size: 1.1rem !important;"> <b>Time
                                                                            :</b>
                                                                        {{triviaEvent.happenings.startTime}}</span>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="row">
                                                                <div
                                                                    class="col-sm-12 col-xl-12 col-xs-12 col-lg-12 col-md-12">
                                                                    <span style="font-size: 1.1rem !important;"> <b>Name
                                                                            :</b>
                                                                        {{triviaEvent.teamName}}</span>
                                                                </div>
                                                                <div
                                                                    class="col-sm-12 col-xl-12 col-xs-12 col-lg-12 col-md-12">
                                                                    <span style="font-size: 1.1rem !important;"> <b>Size
                                                                            :</b>
                                                                        {{triviaEvent.partySize}}</span>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            <div class="row">
                                                                <div
                                                                    class="col-sm-12 col-xl-12 col-xs-12 col-lg-12 col-md-12">
                                                                    <span style="font-size: 1.1rem !important;"> <b>Name
                                                                            :</b>&nbsp;
                                                                        {{triviaContact.customer.firstName}}
                                                                        {{triviaContact.customer.lastName}}</span>
                                                                </div>
                                                                <div
                                                                    class="col-sm-12 col-xl-12 col-xs-12 col-lg-12 col-md-12">
                                                                    <span style="font-size: 1.1rem !important;">
                                                                        <b>Mobile :</b>
                                                                        {{triviaContact.customer.mobile}}</span>
                                                                </div>
                                                            </div>
                                                        </td>

                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <div class="row" style="margin-top:10px;">
                                        <div class="col-xs-12 col-sm-12 col-md-12 col-xl-12 col-lg-12">
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th style="text-align:left !important;">
                                                            <span>Team Member</span>
                                                        </th>

                                                        <th style="text-align:left !important;">
                                                            <span>Date</span>
                                                        </th>
                                                        <th style="text-align:left !important;">
                                                            <span>Time</span>
                                                        </th>
                                                        <th ng-show="triviaEvent.entryType=='Free'">
                                                            <span>Entry Type</span>
                                                        </th>
                                                        <th style="text-align:left !important;">
                                                            <span ng-show="triviaEvent.entryType!='Free'">Price</span>
                                                            <span ng-show="triviaEvent.entryType=='Free'">Staus</span>
                                                        </th>
                                                    </tr>
                                                </thead>
                                                <tbody ng-repeat="event in triviaEvent.whatsOnTeamMembers">
                                                    <script>
                                                        $(document).ready(() => {
                                                            $('.pop').popover({ html: true, animation: true })
                                                        });
                                                        $(document).on('mouseleave', '#popover', function () {
                                                            $('.popover').popover('hide');
                                                        });
                                                    </script>
                                                    <style>
                                                        .popover {
                                                            max-width: 325px !important;
                                                        }
                                                    </style>
                                                    <tr style="margin-top: 1rem;">
                                                        <td>
                                                            <span>{{event.customer.firstName}}&#32;{{event.customer.lastName}}</span>
                                                        </td>
                                                        <td>
                                                            <span>{{triviaEvent.happenings.dateFormat}}</span>
                                                        </td>
                                                        <td>
                                                            <span>{{triviaEvent.happenings.startTime}}</span>
                                                        </td>
                                                        <td ng-show="triviaEvent.entryType!='Free'">
                                                            {{triviaEvent.happenings.entryFee | number : 2}}
                                                        </td>
                                                        <td ng-show="triviaEvent.entryType=='Free'"
                                                            style="text-align: center;">
                                                            <span
                                                                style="background-color: #f50057;color:#fff;padding:2px 10px;">Free</span>
                                                        </td>
                                                        <td ng-show="triviaEvent.entryType=='Free'">
                                                            <span
                                                                style="background-color: green;color:#fff;padding:2px 10px;">Confirmed</span>
                                                        </td>
                                                    </tr>
                                                    <tr
                                                        ng-show="!triviaEvent.isGroupPayment && triviaEvent.entryType!='Free'">
                                                        <td colspan="2"></td>
                                                        <td colspan="1">
                                                            <span>Sub Total Price</span>
                                                        </td>
                                                        <td>
                                                            <span
                                                                style="font-size: 1rem;font-weight:600;">$&nbsp;{{event.subTotalAmt
                                                                | number: 2}}
                                                            </span>
                                                        </td>
                                                    </tr>
                                                    <tr
                                                        ng-show="!triviaEvent.isGroupPayment && triviaEvent.entryType!='Free'">
                                                        <td colspan="2"></td>
                                                        <td colspan="1">
                                                            <span>Service Fee</span>
                                                        </td>
                                                        <td><span
                                                                style="font-size: 1rem;font-weight:600;">$&nbsp;{{event.serviceFee
                                                                | number: 2}}</span> </td>
                                                    </tr>
                                                    <tr style="margin-bottom: 2rem;"
                                                        ng-show="!triviaEvent.isGroupPayment && triviaEvent.entryType!='Free'">
                                                        <td colspan="2"></td>
                                                        <td colspan="1">
                                                            <span>Total Price</span>
                                                        </td>
                                                        <td><span
                                                                style="font-size: 1rem;font-weight:600;">$&nbsp;{{event.totalAmt
                                                                | number: 2}}</span> </td>
                                                    </tr>
                                                    <tr style="margin-bottom: 2rem;"
                                                        ng-show="!triviaEvent.isGroupPayment && triviaEvent.entryType!='Free'">

                                                        <td colspan="2"></td>
                                                        <td colspan="1">
                                                            <span>Status</span>
                                                            <span data-html="true" id="popover"
                                                                data-title="Payment Details <a href='#' class='close' style='color:red;' title='Close' data-dismiss='alert'>&times;</a>"
                                                                class="pop" data-toggle="popover" data-placement="top"
                                                                data-trigger="hover"
                                                                data-content="{{ event | happeningSDTRVAIInDIv : event }}"><i
                                                                    class="fas fa-question-circle"></i></span>
                                                        </td>
                                                        <td><span
                                                                style="font-size: 1rem;font-weight:600;background-color:green;color: #fff !important;padding: 2px 10px;border-radius:2px;"
                                                                ng-show="event.paymentStatus=='succeeded'">Paid</span>
                                                            <span
                                                                style="font-size: 1rem;font-weight:600;background-color:red;color: #fff !important;padding: 2px 10px;border-radius:2px;"
                                                                ng-show="event.paymentStatus=='failed' || event.paymentStatus=='Pending'">Failed</span>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                                <tfoot
                                                    ng-show="triviaEvent.isGroupPayment && triviaEvent.entryType!='Free'">
                                                    <tr>
                                                        <td colspan="2"></td>
                                                        <td colspan="1">
                                                            <span>Sub Total Price</span>
                                                        </td>
                                                        <td><span
                                                                style="font-size: 1rem;font-weight:600;">$&nbsp;{{triviaContact.subTotalAmt
                                                                | number: 2}}</span> </td>
                                                    </tr>
                                                    <tr>
                                                        <td colspan="2"></td>
                                                        <td colspan="1">
                                                            <span>Service Fee</span>
                                                        </td>
                                                        <td><span
                                                                style="font-size: 1rem;font-weight:600;">$&nbsp;{{triviaContact.serviceFee
                                                                | number: 2}}</span> </td>
                                                    </tr>
                                                    <tr style="margin-bottom: 2rem;">
                                                        <td colspan="2"></td>
                                                        <td colspan="1">
                                                            <span>Total Price</span>
                                                        </td>
                                                        <td><span
                                                                style="font-size: 1rem;font-weight:600;">$&nbsp;{{triviaContact.totalAmt
                                                                | number: 2}}</span> </td>
                                                    </tr>
                                                    <tr style="margin-bottom: 2rem;">

                                                        <td colspan="2"></td>
                                                        <td colspan="1">
                                                            <span>Status</span>
                                                            <span data-html="true" id="popover"
                                                                data-title="Payment Details <a href='#' class='close' style='color:red;' title='Close' data-dismiss='alert'>&times;</a>"
                                                                class="pop" data-toggle="popover" data-placement="top"
                                                                data-trigger="hover"
                                                                data-content="{{ triviaEvent | happeningSDTRVAI : triviaEvent }}"><i
                                                                    class="fas fa-question-circle"></i></span>
                                                        </td>
                                                        <td><span
                                                                style="font-size: 1rem;font-weight:600;background-color:green;color: #fff !important;padding: 2px 10px;border-radius:2px;"
                                                                ng-show="triviaContact.paymentStatus=='succeeded'">Paid</span>
                                                            <span
                                                                style="font-size: 1rem;font-weight:600;background-color:red;color: #fff !important;padding: 2px 10px;border-radius:2px;"
                                                                ng-show="triviaContact.paymentStatus=='failed' || triviaContact.paymentStatus=='Pending'">Failed</span>
                                                        </td>
                                                    </tr>
                                                </tfoot>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <!-- <div class="row">
                                        <div class="col-sm-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"
                                            ng-show="triviaEvent.status=='new'">
                                            <button type="button" class="btn btn-primary" id="confirm"
                                                ng-click="confirmed()"
                                                style="background-color: #4CAF50 !important;padding: 6px 60px!important;border-radius: 3px;font-size:26px;border:1px solid #4CAF50 !important;">Accept</button>
                                            <button type="button" class="btn btn-secondary"
                                                ng-click="rejected()"
                                                style="background-color: red !important;border-radius: 3px;color:#fff !important;padding:6px 60px !important;font-size:26px;border:1px solid red !important"
                                                data-dismiss="modal">Reject</button>
                                        </div>
                                        <div class="col-sm-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                            <a href="javascript:;" dis ng-show="triviaEvent.status=='rejected'"
                                                style="background-color:red;    border-radius: 2px !important;  padding: 6px 50px !important;  font-size: 26px;border: 1px solid red !important;"
                                                class="btn btn-primary disable">Rejected</a>
                                            <a href="javascript:;" ng-show="triviaEvent.status=='confirmed'"
                                                style="background-color:#4CAF50;    border-radius: 2px !important;  padding: 6px 50px !important;  font-size: 26px;border: 1px solid#4CAF50 !important;"
                                                class="btn btn-primary disable">Accepted</a>
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .disable {
        pointer-events: none;
        cursor: default;
    }

    #wrapper {
        width: 100%;
        overflow-x: inherit;
    }

    th>span {
        font-size: 16px !important;
    }

    th {
        text-align: center !important;
    }

    .table-bordered>thead>tr>th,
    .table-bordered>thead>tr>td {
        background-color: #fff !important;
    }

    .close {
        font-size: 33px !important;
        color: rgb(250, 250, 250) !important;
    }

    #eventsViewModal.left .modal-dialog,
    #eventsViewModal.right .modal-dialog {
        position: fixed;
        margin: auto;
        width: 700px;
        height: 100%;
        -webkit-transform: translate3d(0%, 0, 0);
        -ms-transform: translate3d(0%, 0, 0);
        -o-transform: translate3d(0%, 0, 0);
        transform: translate3d(0%, 0, 0);
    }

    #eventsViewModal.left .modal-content,
    #eventsViewModal.right .modal-content {
        height: 100%;
        overflow-y: auto;
    }

    #eventsViewModal.left .modal-body,
    #eventsViewModal.right .modal-body {
        padding: 15px 15px 80px;
    }

    /*Left*/
    #eventsViewModal.left.fade .modal-dialog {
        right: -320px;
        -webkit-transition: opacity 0.3s linear, left 0.3s ease-out;
        -moz-transition: opacity 0.3s linear, left 0.3s ease-out;
        -o-transition: opacity 0.3s linear, left 0.3s ease-out;
        transition: opacity 0.3s linear, left 0.3s ease-out;
    }

    #eventsViewModal.left.fade.in .modal-dialog {
        right: 0;
    }

    #eventsViewModal.right.fade .modal-dialog {
        right: -320px;
        -webkit-transition: opacity 0.3s linear, right 0.3s ease-out;
        -moz-transition: opacity 0.3s linear, right 0.3s ease-out;
        -o-transition: opacity 0.3s linear, right 0.3s ease-out;
        transition: opacity 0.3s linear, right 0.3s ease-out;
    }

    #eventsViewModal.right.fade.in .modal-dialog {
        right: 0;
    }

    tr>td {
        cursor: pointer !important;
    }

    .modal-content {
        height: 100%;
        border-radius: 0;
        position: relative;
    }

    .modal-footer {
        border-radius: 0;
        bottom: 0px;
        position: absolute;
        width: 100%;
        background-color: #ddd !important;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.19), 0 6px 6px rgba(0, 0, 0, 0.23);
    }
</style>