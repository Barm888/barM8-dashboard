<div class="wrapper wrapper-content" id="managePromotionCtl" ng-controller="managePromotionCtl">
    <div class="m-t-sm" style="margin-top:2.6rem;">
        <div class="row card" style="margin: 0.5rem 0 0rem 0 !important;">
            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                <div class="row">
                    <div class="col-sm-12 col-xs-12 col-md-12 col-lg-12 col-xl-12">
                        <div class="row" style="margin-top:1rem;margin-bottom:1rem;">
                            <div class="col-sm-12 col-xs-12 col-md-12 col-xl-12 col-lg-12">
                                <b class="manage-txt">Manage promotions</b>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-6 col-sm-6 col-md-6 col-xl-6 col-lg-6">
                                <button data-toggle="collapse" data-target="#filterCollapse" class="btn" style="border-radius: 5%;padding: 4px 9px !important;
                            background-color:#f9a141 !important;color:#fff !important;font-size: 20px;"
                                    title="Filter"><i class="fas fa-filter"></i> Filter</button>

                            </div>
                            <div class="col-xs-6 col-sm-6 col-md-6 col-xl-6 col-lg-6">
                                <button class="btn btn-primary pull-right" ui-sref="create-promotion"
                                    style="margin-bottom: 0.5rem; background-color: #4caf50;color:#fff; font-size: 20px;border-radius:2px;border: 1px solid #10c233;">
                                    Create new promotion </button>
                            </div>
                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                <div id="filterCollapse" class="collapse">
                                    <div class="row" style="margin-bottom: 1rem;">
                                        <div class="col-sm-4 col-xs-4 col-md-4 col-lg-4 col-xl-4">
                                            <div class="from-group">
                                                <label for="sponsor_name_fil" style="font-size: 16px;">Sponsor
                                                    name</label>
                                                <input class="form-control custom-input" id="sponsor_name_fil"
                                                    type="text">
                                            </div>
                                        </div>
                                        <div class="col-sm-8 col-xs-8 col-md-8 col-lg-8 col-xl-8"
                                            style="margin-top:2rem;">
                                            <button class="btn" ng-click="filterPromotion()"
                                                style="background-color: #f9a141 !important;color:#fff !important;font-size:1.4rem;">Search</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col- xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12" style="margin-bottom: 10px;">
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th class="col-sm-2 col-xs-2 col-md-2 col-lg-2 col-xl-2">
                                        <span>Sponsor name</span>
                                    </th>
                                    <th class="col-sm-2 col-xs-2 col-md-2 col-lg-2 col-xl-2">
                                        <span>Title</span>
                                    </th>
                                    <th class="col-sm-3 col-xs-3 col-md-3 col-lg-3 col-xl-3">
                                        <span>Description</span>
                                    </th>
                                    <th class="col-sm-2 col-xs-2 col-md-2 col-lg-2 col-xl-2">
                                        <span>Images</span>
                                    </th>
                                    <th class="col-sm-2 col-xs-2 col-md-2 col-lg-2 col-xl-2">
                                        <span>Video</span>
                                    </th>
                                    <th class="col-sm-1 col-xs-1 col-md-1 col-lg-1 col-xl-1">
                                        <span>Status</span>
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="list in promotionList" ng-mouseover="showTheMiddle($event, $index)"
                                    ng-mouseleave="hiddenTheMiddle($index)" style="position: relative;">
                                    <script>
                                        $(document).ready(() => {
                                            $('[data-toggle="tooltip"]').tooltip();
                                            $(".pop").popover({ trigger: "manual", html: true, animation: true })
                                                .on("mouseenter", function () {
                                                    var _this = this;
                                                    $(this).popover("show");
                                                    $(".popover").on("mouseleave", function () { $(_this).popover('hide'); });
                                                }).on("mouseleave", function () {
                                                    var _this = this;
                                                    setTimeout(function () {
                                                        if (!$(".popover:hover").length) $(_this).popover("hide");
                                                    });
                                                });
                                        });

                                    </script>
                                    <td class="col-sm-2 col-xs-2 col-md-2 col-lg-2 col-xl-2">
                                        {{list.sponsorDetails.sponsorName}}</td>
                                    <td class="col-sm-2 col-xs-2 col-md-2 col-lg-2 col-xl-2">
                                        {{list.title}}</td>
                                    <td class="col-sm-3 col-xs-3 col-md-3 col-lg-3 col-xl-3">
                                        {{list.desc}}</td>
                                    <td class="col-sm-2 col-xs-2 col-md-2 col-lg-2 col-xl-2">
                                        <img ng-if="list && list.primaryImg && list.primaryImg.length"
                                            ng-src="{{list.primaryImg[0].path || 'https://barm8-space1.sgp1.digitaloceanspaces.com/default-img/default.png' }}"
                                            data-toggle="tooltip" data-placement="top"
                                            title="{{list.primaryImg[0].fileName || 'No Image'}}" class="img-thumbnail"
                                            style="width: 220px;height:120px;object-fit:contain;"
                                            alt="{{list.primaryImg[0].fileName || 'No Image'}}">
                                    </td>
                                    <td class="col-sm-2 col-xs-2 col-md-2 col-lg-2 col-xl-2" style="text-align:center;">
                                        <video ng-if="list && list.video && list.video.length && list.video[0].path"
                                            muted class="card" width="340" height="280" loop="true" autoplay="true"
                                            controls>
                                            <source src="{{list.video[0].path}}" type="video/mp4">
                                            <source src="{{list.video[0].path}}" type="video/ogg">
                                        </video>
                                        <div ng-if="!list.video[0].path" class="card" style="padding:30px;">
                                            <b style="font-size: 1.4rem;">No video</b>
                                        </div>
                                    </td>
                                    <td class="col-sm-1 col-xs-1 col-md-1 col-lg-1 col-xl-1">
                                        <b class="btn" ng-click="updateStatus(list.id)" ng-show="list.status=='Pending'"
                                            style="background-color: red !important;color:#fff !important;border-radius: 2px !important;">{{list.status}}</b>
                                        <b class="btn" ng-click="updateStatus(list.id)" ng-show="list.status=='Live'"
                                            style="background-color: green !important;color:#fff !important;padding: 5px 26px !important;border-radius: 2px !important;">{{list.status}}</b>
                                    </td>
                                    <td class="middle_{{$index}}"
                                        style="display: none;background-color:#ffffff00;padding: 4.5px !important;margin-top:3.5rem;">
                                        <button class="btn" data-toggle="tooltip" style="padding: 6px 10px!important;background-color:#ef6c00 !important;
                                        color:#fff !important;border-radius: 50px !important;" data-placement="top"
                                            title="View" ng-click="viewPromotion(list.id)">
                                            <i class="fas fa-eye"></i></button>
                                        <button class="btn" data-toggle="tooltip" style="padding: 6px 10px!important;background-color:#283593 !important;
                                            color:#fff !important;border-radius: 50px !important;" data-placement="top"
                                            title="Edit" ng-click="editPromotion(list.id)">
                                            <i class="fas fa-pencil-alt"></i></button>
                                        <button class="btn" data-toggle="tooltip" style="padding: 6px 10px!important;background-color:#d50000 !important;
                                            color:#fff !important;border-radius: 50px !important;"
                                            ng-click="deletePromotion(list.id)" data-placement="top" title="Delete">
                                            <i class="far fa-trash-alt"></i></button>
                                    </td>
                                </tr>
                                <tr ng-if="promotionList && promotionList.length==0" style="text-align: center;">
                                    <td colspan="7">
                                        <span>No Data</span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal" id="deleteConfirm" tabindex="-1" role="dialog">
                    <div class="modal-dialog" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                    <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body">
                                <b style="font-size: 1.3rem;">Do you want to proceed?</b>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-primary" ng-click="deleteConfirm()"
                                    style="background-color: #1bbc3b !important;font-size:1.3rem;padding:6px 20px !important;">Yes</button>
                                <button type="button" class="btn btn-secondary" data-dismiss="modal"
                                    style="background-color: #e3360b !important;font-size:1.3rem;padding:6px 20px !important;color:#fff !important;">No</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal" id="viwePromotionModal" tabindex="-1" role="dialog" style="top:0px !important;">
                    <div class="modal-dialog modal-lg modal-xl" role="document">
                        <div class="modal-content">
                            <div class="modal-header">
                                <div class="row">
                                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                        <h2 style="margin-top: 6px;
                                        margin-bottom: 10px;
                                        margin-left: 20px;">View Promotion</h2>
                                    </div>
                                    <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="modal-body"
                                style="text-align:left !important;padding: 1px 15px 30px 15px !important;">
                                <div class="row">
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12 col-md-6 col-lg-6 col-xl-6">
                                                <div class="form-group">
                                                    <label for="view-sponsor-name">Sponsor Name</label>
                                                    <input type="text" id="view-sponsor-name"
                                                        class="form-control custom-input" ng-disabled="true"
                                                        ng-model="viewPromotionList.sponsorDetails.sponsorName">
                                                </div>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                                        <label>Sponsor logo</label>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                                        <img id="popul-log"
                                                            src="{{viewPromotionList.sponsorDetails.sponsorLogo.path}}"
                                                            data-toggle="tooltip" data-placement="top" class="card"
                                                            style="width: 160px;height:90px;object-fit: contain;">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                                <div class="form-group">
                                                    <label for="view-promotion-title">Promotion title</label>
                                                    <input type="text" id="view-promotion-title" ng-disabled="true"
                                                        class="form-control custom-input"
                                                        ng-model="viewPromotionList.title">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                                <div class="form-group">
                                                    <label for="view-promotion-desc">Description</label>
                                                    <textarea id="view-promotion-desc" rows="3" style="border: 2px solid #ddd !important;
                                                    font-size: 16px !important;" class="form-control"
                                                        ng-disabled="true" ng-model="viewPromotionList.desc">
                                                </textarea>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                                <div class="form-group">
                                                    <label for="view-promotion-title">Start Date</label>
                                                    <input type="text" id="view-promotion-title" ng-disabled="true"
                                                        class="form-control custom-input"
                                                        ng-model="viewPromotionList.sDate.date">
                                                </div>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                                <div class="form-group">
                                                    <label for="view-promotion-title">Start time</label>
                                                    <input type="text" id="view-promotion-title" ng-disabled="true"
                                                        class="form-control custom-input"
                                                        ng-model="viewPromotionList.startTime">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                                <div class="form-group">
                                                    <label for="view-promotion-title">End Date</label>
                                                    <input type="text" id="view-promotion-title" ng-disabled="true"
                                                        class="form-control custom-input"
                                                        ng-model="viewPromotionList.eDate.date">
                                                </div>
                                            </div>
                                            <div class="col-xs-6 col-sm-6 col-md-6 col-lg-6 col-xl-6">
                                                <div class="form-group">
                                                    <label for="view-promotion-title">End time</label>
                                                    <input type="text" id="view-promotion-title"
                                                        class="form-control custom-input" ng-disabled="true"
                                                        ng-model="viewPromotionList.endTime">
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 col-xl-4"
                                                ng-if="viewPromotionList && viewPromotionList.video && viewPromotionList.video.length && viewPromotionList.video[0].path">
                                                <label for="view-promotion-title">Video</label>
                                                <video muted class="card" width="500" height="440" loop="true"
                                                    autoplay="true" controls>
                                                    <source src="{{viewPromotionList.video[0].path}}" type="video/mp4">
                                                    <source src="{{viewPromotionList.video[0].path}}" type="video/ogg">
                                                </video>
                                            </div>
                                            <div class="col-xs-12 col-sm-12 col-md-4 col-lg-4 col-xl-4"
                                                ng-if="viewPromotionList && viewPromotionList.videoThumbnail && viewPromotionList.videoThumbnail.length && viewPromotionList.videoThumbnail[0].path">
                                                <label for="view-promotion-title">Video thumbnail image</label>
                                                <img ng-src="{{viewPromotionList.videoThumbnail[0].path || 'https://barm8-space1.sgp1.digitaloceanspaces.com/default-img/default.png' }}"
                                                    data-toggle="tooltip" data-placement="top"
                                                    title="{{viewPromotionList.videoThumbnail[0].fileName || 'No Image'}}"
                                                    class="card"
                                                    style="width: 260px;height:150px;    object-fit: contain;"
                                                    alt="{{viewPromotionList.videoThumbnail[0].fileName || 'No Image'}}">
                                            </div>
                                        </div>
                                        <div class="row">
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"
                                                ng-if="viewPromotionList && viewPromotionList.primaryImg && viewPromotionList.primaryImg.length && viewPromotionList.primaryImg[0].path">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                                        <label for="view-promotion-title">Primary Image</label>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                                        <img ng-src="{{viewPromotionList.primaryImg[0].path || 'https://barm8-space1.sgp1.digitaloceanspaces.com/default-img/default.png' }}"
                                                            data-toggle="tooltip" data-placement="top"
                                                            title="{{viewPromotionList.primaryImg[0].fileName || 'No Image'}}"
                                                            class="card"
                                                            style="width: 260px;height:150px;    object-fit: contain;"
                                                            alt="{{viewPromotionList.primaryImg[0].fileName || 'No Image'}}">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="row" style="margin-top: 1.5rem;">
                                            <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12"
                                                ng-if="viewPromotionList && viewPromotionList.secondaryImg && viewPromotionList.secondaryImg.length && viewPromotionList.secondaryImg[0].path">
                                                <div class="row">
                                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12 col-xl-12">
                                                        <label for="view-promotion-title">Secondary
                                                            Image</label>
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4 col-xl-4"
                                                        ng-repeat="img in viewPromotionList.secondaryImg"
                                                        style="margin-top: 1rem;">
                                                        <img ng-src="{{img.path || 'https://barm8-space1.sgp1.digitaloceanspaces.com/default-img/default.png' }}"
                                                            data-toggle="tooltip" data-placement="top"
                                                            title="{{img.fileName || 'No Image'}}" class="card"
                                                            style="width: 320px;height:170px;object-fit: contain;"
                                                            alt="{{img.fileName || 'No Image'}}">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<style type="text/css">
    .card {
        margin: 0rem 0 0rem 0
    }

    @media(min-width:768px) {
        .eventCard {
            padding: 20px
        }
    }

    @media(min-width:992px) {
        .eventCard {
            padding: 20px
        }
    }

    @media(min-width:1200px) {
        .eventCard {
            padding: 20px
        }
    }

    #page-wrapper {
        padding: 0 0px !important;
    }

    .header-happenings {
        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, .3);
        padding-top: 4px;
        background-color: #f9a141;
        border-radius: 4px;
    }

    .ui-timepicker-wrapper {
        width: 11.5em !important;
    }

    .back-txt {
        margin-left: 1rem;
        font-size: 1.2rem;
        color: #000 !important;
    }

    .manage-txt {
        font-size: 1.4rem;
        color: #000 !important;
    }

    .manage-txt-1 {
        font-size: 1.044rem;
        color: #000 !important;
    }

    th>span {
        font-size: 16px;
    }

    label {
        font-size: 1.2rem !important;
    }

    @media (min-width: 768px) {
        .modal-xl {
            width: 90%;
            max-width: 1200px;
        }
    }
</style>